%  Copyright 2020-2022 Robert Bosch GmbH
%
%  Licensed under the Apache License, Version 2.0 (the "License");
%  you may not use this file except in compliance with the License.
%  You may obtain a copy of the License at
%
%      http://www.apache.org/licenses/LICENSE-2.0
%
%  Unless required by applicable law or agreed to in writing, software
%  distributed under the License is distributed on an "AS IS" BASIS,
%  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
%  See the License for the specific language governing permissions and
%  limitations under the License.
%
\documentclass[a4paper,10pt]{report}

% --------------------------------------------------------------------------------------------------------------
% common preamble
% --------------------------------------------------------------------------------------------------------------

\input{./styles/preamble}


% --------------------------------------------------------------------------------------------------------------
% document title
% --------------------------------------------------------------------------------------------------------------

\author{RobotFramework AIO team}
\title{Documentation style guide}
\date{22.08.2022}

% --------------------------------------------------------------------------------------------------------------
% document header
% --------------------------------------------------------------------------------------------------------------

\begin{document}

\hypersetup{pageanchor=false}

\maketitle

\clearpage
\pagenumbering{Alph}
\tableofcontents

\clearpage
\pagenumbering{arabic}

\hypersetup{pageanchor=true}

% --------------------------------------------------------------------------------------------------------------
% document content
% --------------------------------------------------------------------------------------------------------------

\chapter{Introduction}

The documentation of the \rfw\ and also the documentation of every single component of the \rfw\ is provided in PDF format.
Most of the sources of the documentation (except the interface definitions of Python modules) are written in LaTeX.
Parts of the LaTeX sources are written manually, other parts of the LaTeX sources are generated out of the interface definitions of Python modules
automatically by a converter tool named Pandoc.

The layout of the PDF output is determined by certain LaTeX style files. These style files are e.g. responsible for the layout of code listings (syntax highlighting),
the definition of LaTeX commands used by Pandoc and certain admonitions (like text boxes indicating e.g. a warning or an error).

In the context of \rfw\ the documentation files in PDF format are available at two different levels, generated by two different tool chains. This is based on the
fact that the code of the complete \rfw\ is developed in several repositories (every component of the \rfw\ has it's own repository).

\begin{enumerate}

   \item The tool \rlog{GenPackageDoc} creates the documentation of a Python package within a single repository.

   \item The tool \rlog{GenMainDoc} creates the main documentation of the \rfw\ (including the documentation of it's components).

\end{enumerate}

Both tool chains work with the same LaTeX style files:

\begin{enumerate}

   \item \rlog{admonitions.sty}\\
      Defines admonitions like: \rcode{boxwarning}, \rcode{boxerror}, \rcode{boxgoodpractice}, \rcode{boxhint}, \rcode{boxtip}

   \item \rlog{common.sty}\\
      Defines common commands like support for \rlog{history.tex}

   \item \rlog{pandoc.sty}\\
      Defines commands used by Pandoc when computing code directives in rst sources

   \item \rlog{robotframeworkaio.sty}\\
      Defines \rfw\ specific elements like syntax highlighting for \rfwcore\ and Python code

\end{enumerate}

All required style files are imported by \rlog{preamble.tex}. In case you plan to introduce LaTeX files outside the scope of
\rlog{GenPackageDoc} and \rlog{GenMainDoc}, make sure to import the preamble in the following way (like in this LaTeX source file):

\begin{verbatim}
   \input{./styles/preamble}
\end{verbatim}

We recommend to use this preamble in all LaTeX files to give all resulting PDF files a unique look\&feel.

% --------------------------------------------------------------------------------------------------------------

\chapter{Admonitions}

\rlog{admonitions.sty} contains the definition of certain text boxes with certain symbols and background colors. The purpose is to highlight
important parts of the documentation.

\vspace{2ex}

\textbf{Warnings}
\begin{verbatim}
\begin{boxwarning}{Warning}
This is a box which gives you a warning.
\end{boxwarning}
\end{verbatim}

\begin{boxwarning}{Warning}
This is a box which gives you a warning.
\end{boxwarning}

\vspace{2ex}

\textbf{Errors}
\begin{verbatim}
\begin{boxerror}{Error}
This is a box which informs you about an error.
\end{boxerror}
\end{verbatim}

\begin{boxerror}{Error}
This is a box which informs you about an error.
\end{boxerror}

\vspace{2ex}

\textbf{Good practices}
\begin{verbatim}
\begin{boxgoodpractice}{Good practice}
This is a box which informs you about a good practice.
\end{boxgoodpractice}
\end{verbatim}

\begin{boxgoodpractice}{Good practice}
This is a box which informs you about a good practice.
\end{boxgoodpractice}

\vspace{2ex}

\textbf{Hints}
\begin{verbatim}
\begin{boxhint}{Hint}
This is a box which gives you a hint
\end{boxhint}
\end{verbatim}

\begin{boxhint}{Hint}
This is a box which gives you a hint
\end{boxhint}

\newpage

\textbf{Tips}
\begin{verbatim}
\begin{boxtip}{Tip}
This is a box which gives you a tip
\end{boxtip}
\end{verbatim}

\begin{boxtip}{Tip}
This is a box which gives you a tip
\end{boxtip}

% --------------------------------------------------------------------------------------------------------------

\chapter{Common styles}

Every component repository contains a LaTeX file \rlog{History.tex}.

A table containing the package history, can be written in the following way:

\begin{verbatim}
\begin{packagehistory}

\historyversiondate{0.1.0}{07/2022}
\historychange{Initial version}

\historyversiondate{0.2.0}{08/2021}
\historychange{- new feature\newline
- another change}

\end{packagehistory}
\end{verbatim}

\begin{packagehistory}

\historyversiondate{0.1.0}{07/2022}
\historychange{Initial version}

\historyversiondate{0.2.0}{08/2021}
\historychange{- new feature\newline
- another change}

\end{packagehistory}

% --------------------------------------------------------------------------------------------------------------

\chapter{Pandoc}

In the context of \rfw\ the converter tool Pandoc is used to convert the interface definitions (that are the content of the docstrings of the corresponding
Pythom modules) to LaTeX format. For this purpose Pandoc introduced some LaTeX commands that needs to be defined. A user writing documentation has no direct
contact to this and can ignore the content of \rlog{pandoc.sty}.

% --------------------------------------------------------------------------------------------------------------

\chapter{\rfw\ styles}

Syntax highlighting is available for \rfw\ code and for Python code. Also for console listings and file system informations (like file names)
an own layout is available.

The common layout for \rfw\ code and Python code is the same. Differences only belong to the keyords that are language specific.

The layouts are available in two different characteristics: complete text block and inline.

The main difference between code listings and console listings is the background color of the text boxes containing the listing:

\begin{itemize}
   \item Code listings are indicated by a background color of light orange: \rcode{code}
   \item Console listings are indicated by a background color of light blue: \rlog{console}
\end{itemize}


\section{Abbreviations}

To ease a unique typing of the frameworks the following LaTeX commands are available: \texttt{rfw} and \texttt{rfwcode}:

\begin{verbatim}
The \rfw\ is derived out of the \rfwcore.
\end{verbatim}

The \rfw\ is derived out of the \rfwcore.

\section{Code listings}

\textbf{\rfw\ code block}
\begin{verbatim}
\begin{robotcode}
*** Test Cases ***
Hello World
   FOR    ${index}    IN RANGE    1    11
      Log  Hello world ${index}
   END
\end{robotcode}
\end{verbatim}

\begin{robotcode}
*** Test Cases ***
Hello World
   FOR    ${index}    IN RANGE    1    11
      Log  Hello world ${index}
   END
\end{robotcode}

\newpage

\textbf{\rfw\ code block (extended)}

It is possible to give the listing a caption. It is also possible to highlight certain lines within the listing. The highlighting can be realized by a list
of numbers of all lines, that shall be highlighted (\texttt{hlcode}):

\begin{verbatim}
\begin{robotcode}[caption=Robot code example, 
                  linebackgroundcolor=\hlcode{1,4}]
*** Test Cases ***
Hello World
   FOR    ${index}    IN RANGE    1    11
      Log  Hello world ${index}
   END
\end{robotcode}
\end{verbatim}

\vspace{2ex}

\begin{robotcode}[caption=Robot code example,
                  linebackgroundcolor=\hlcode{1,4}]
*** Test Cases ***
Hello World
   FOR    ${index}    IN RANGE    1    11
      Log  Hello world ${index}
   END
\end{robotcode}

\vspace{2ex}

\textbf{\rfw\ inline code}
\begin{verbatim}
The variable is set in this way: \rcode{$\{prev\}\ \ \ \ Set Variable\ \ \ \ $\{0\}}
\end{verbatim}

The variable is set in this way: \rcode{$\{prev\}\ \ \ \ Set Variable\ \ \ \ $\{0\}}

Consider that inside \texttt{rcode} the brackets \texttt{\{} and \texttt{\}} and also the blanks have to be masked!

\vspace{2ex}

\textbf{Python code block}
\begin{verbatim}
\begin{pythoncode}
def print_pattern():
    values = ("A", "B", "C")
    for value in values:
        print(f"value : {value}")
\end{pythoncode}
\end{verbatim}

\begin{pythoncode}
def print_pattern():
    values = ("A", "B", "C")
    for value in values:
        print(f"value : {value}")
\end{pythoncode}

\newpage

\textbf{Python code block (extended)}

It is possible to give the listing a caption. It is also possible to highlight certain lines within the listing. The highlighting can be realized by a list
of numbers of all lines, that shall be highlighted (\texttt{hlcode}):

\vspace{2ex}

\begin{verbatim}
\begin{pythoncode}[caption=Python code example, 
                   linebackgroundcolor=\hlcode{1,3}]
def print_pattern():
    values = ("A", "B", "C")
    for value in values:
        print(f"value : {value}")
\end{pythoncode}
\end{verbatim}

\begin{pythoncode}[caption=Python code example, 
                   linebackgroundcolor=\hlcode{1,3}]
def print_pattern():
    values = ("A", "B", "C")
    for value in values:
        print(f"value : {value}")
\end{pythoncode}

\vspace{2ex}

\textbf{Python inline code}
\begin{verbatim}
The variable is set in this way: \pcode{values = ("A", "B", "C")}
\end{verbatim}

The variable is set in this way: \pcode{values = ("A", "B", "C")}

\section{Console listings}

Because of the console output of \rfw\ test executions contains a lot of \rfw\ specific keywords, the console listing layout is adapted to \rfw.
An own individual layout for console listings of pure Python scripts is not available (and also not really required in the context of \rfw).

Therefore for console listings of both \rfw\ and Python the corresponding \rfw\ commands can be used.

To keep this layout stuff simple, the console listings layout is also used for all informations related to the file system (e.g. paths and file names).

\vspace{2ex}

\textbf{Console listing}

\begin{verbatim}
\begin{robotlog}
==============================================================================
HelloWorld
==============================================================================
Hello World                                                           | PASS |
------------------------------------------------------------------------------
HelloWorld                                                            | PASS |
1 test, 1 passed, 0 failed, 0 unknown
==============================================================================
Output:  C:\RobotTest\testcases\output.xml
Log:     C:\RobotTest\testcases\log.html
Report:  C:\RobotTest\testcases\report.html
\end{robotlog}
\end{verbatim}

\newpage

\begin{robotlog}
==============================================================================
HelloWorld
==============================================================================
Hello World                                                           | PASS |
------------------------------------------------------------------------------
HelloWorld                                                            | PASS |
1 test, 1 passed, 0 failed, 0 unknown
==============================================================================
Output:  C:\RobotTest\testcases\output.xml
Log:     C:\RobotTest\testcases\log.html
Report:  C:\RobotTest\testcases\report.html
\end{robotlog}

\vspace{2ex}

\textbf{Console listing (extended)}

It is possible to give the listing a caption. It is also possible to highlight certain lines within the listing. The highlighting can be realized by a list
of numbers of all lines, that shall be highlighted (\texttt{hllog}):

\vspace{2ex}

\begin{verbatim}
\begin{robotlog}[caption=Robot log example, 
                 linebackgroundcolor=\hllog{7,11}]
==============================================================================
HelloWorld
==============================================================================
Hello World                                                           | PASS |
------------------------------------------------------------------------------
HelloWorld                                                            | PASS |
1 test, 1 passed, 0 failed, 0 unknown
==============================================================================
Output:  C:\RobotTest\testcases\output.xml
Log:     C:\RobotTest\testcases\log.html
Report:  C:\RobotTest\testcases\report.html
\end{robotlog}
\end{verbatim}

\begin{robotlog}[caption=Robot log example, 
                 linebackgroundcolor=\hllog{7,11}]
==============================================================================
HelloWorld
==============================================================================
Hello World                                                           | PASS |
------------------------------------------------------------------------------
HelloWorld                                                            | PASS |
1 test, 1 passed, 0 failed, 0 unknown
==============================================================================
Output:  C:\RobotTest\testcases\output.xml
Log:     C:\RobotTest\testcases\log.html
Report:  C:\RobotTest\testcases\report.html
\end{robotlog}

\vspace{2ex}

\textbf{Inline console output}
\begin{verbatim}
The test results are shown like this: \rlog{1 test, 1 passed, 0 failed, 0 unknown}
\end{verbatim}

The test results are shown like this: \rlog{1 test, 1 passed, 0 failed, 0 unknown}

\vspace{2ex}

\begin{verbatim}
The results of the test execution can be found in the following files:
\begin{robotlog}
C:\RobotTest\testcases\output.xml
C:\RobotTest\testcases\log.html
C:\RobotTest\testcases\report.html
\end{robotlog}
\end{verbatim}

\newpage

The results of the test execution can be found in the following files:
\begin{robotlog}
C:\RobotTest\testcases\output.xml
C:\RobotTest\testcases\log.html
C:\RobotTest\testcases\report.html
\end{robotlog}

\vspace{2ex}

\begin{verbatim}
The file \rlog{log.html} contains the log file in html format.
\end{verbatim}

The file \rlog{log.html} contains the log file in html format.

% --------------------------------------------------------------------------------------------------------------

\end{document}
